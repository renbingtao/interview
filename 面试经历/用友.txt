你在金蝶都做的什么
二次开发，做澳门政府的项目

在这里面你都负责什么
需求开发、压测、运维部署、线上问题排查

压测效果不好的时候，你负责分析吗？问题点会定位吗？
通过top查看cpu使用率高的线程，jstack查看堆栈，定位到业务代码
参考答案：通过压测确定哪些接口慢，再通过arthas的trace命令查看每一行代码的调用时间，定位到具体代码再分析
延展：接口性能优化有哪些方案？多个单次操作合并成批量操作；锁的粒度不能太大（防止死锁）也不能太小（会频繁加锁释放锁，总开销不一定低）；看情况改造成多线程；缓存；数据压缩；sql优化

你只给开发提供这些东西？

你做业务开发都做些什么呢

DDD有用过吗

你们把服务拆分后，分布式事务是如何解决的
TCC

confirm失败了怎么办
执行cancel，把try阶段做的事情进行反向补偿
参考答案：重试confirm，因为try已经成功了，confirm大概率会成功，这时候失败可能是临时问题（比如网络、服务暂时不可用），可以延迟一段时间后再重试
如果多次重试都失败，则执行cancel，回滚到开始的状态
如果cancel也失败，也是类似的，先重试，重试也失败则人工接入

confirm失败会执行cancel是吗

你们的接口幂等是怎么做的
通过唯一索引查看之前是否有做过
正确答案：一锁二判三更新。一锁是获取分布式锁，建议redis锁，因为它是非阻塞的（tryLock）；二判，如果有操作流水号，则建议基于操作流水号做幂等，并将操作流水号作为唯一索引。（更新后才释放分布式锁，不要提前释放）

怎么查
表中预定一个特定的字段，建立唯一索引

你上来就直接查数据库？如果查出来，并发写进去一条怎么办

你们的业务有走异步的情况吗

线程池的拒绝策略都有哪些，一般用什么
1.直接拒绝（不会报错） 2.报错（默认） 3.由提交任务的线程执行 4.丢弃最老的任务 一般用默认的报错，这样可以知道出现了异常

有遇到过数据库死锁的问题吗

你现在找工作想找什么样的
