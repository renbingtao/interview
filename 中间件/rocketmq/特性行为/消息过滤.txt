
消息过滤功能通过生产者和消费者对消息的属性、标签进行定义，并在 Apache RocketMQ 服务端根据过滤条件进行筛选匹配，将符合条件的消息投递给消费者进行消费

消息过滤主要通过以下几个关键流程实现：
生产者：生产者在初始化消息时预先为消息设置一些属性和标签，用于后续消费时指定过滤目标。
消费者：消费者在初始化及后续消费流程中通过调用订阅关系注册接口，向服务端上报需要订阅指定主题的哪些消息，即过滤条件。
服务端：消费者获取消息时会触发服务端的动态过滤计算，Apache RocketMQ 服务端根据消费者上报的过滤条件的表达式进行匹配，并将符合条件的消息投递给消费者。

消息过滤分类
=====================Tag标签过滤=====================
基础消息过滤能力
生产者在发送消息时，设置消息的Tag标签，消费者需指定已有的Tag标签来进行匹配订阅
Tag由生产者发送消息时设置，每条消息允许设置【一个】Tag标签。Tag使用可见字符，建议长度不超过128字符

消费者匹配标签为【精准匹配】
支持单标签、多标签（多个Tag之间为或的关系，使用两个竖线（||）隔开，例如Tag1||Tag2||Tag3）、全匹配（星号（*））

=====================SQL属性过滤=====================
高级消息过滤方式
生产者在发送消息时可设置多个属性（每个属性都是一个自定义的键值对Key-Value），消费者订阅时可设置SQL语法的过滤表达式过滤多个属性
SQL属性过滤使用SQL92语法作为过滤规则表达式，语法如：IS NULL、BETWEEN xxx AND xxx、IN (xxx, xxx)等

使用建议
合理划分主题和Tag标签
从消息的过滤机制和主题的原理机制可以看出，业务消息的拆分可以基于主题进行筛选，也可以基于主题内消息的Tag标签及属性进行筛选。关于拆分方式的选择，应遵循以下原则：
消息类型是否一致：不同类型的消息，如顺序消息和普通消息需要使用不同的主题进行拆分，无法通过Tag标签进行分类
业务域是否相同：不同业务域和部门的消息应该拆分不同的主题。例如物流消息和支付消息应该使用两个不同的主题；同样是一个主题内的物流消息，普通物流消息和加急物流消息则可以通过不同的Tag进行区分
消息量级和重要性是否一致：如果消息的量级规模存在巨大差异，或者说消息的链路重要程度存在差异，则应该使用不同的主题进行隔离拆分
